{
	"info": {
		"_postman_id": "order-mgmt-2026",
		"name": "Order Management API",
		"description": "Complete API testing collection for the Order Management System",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Setup",
			"item": [
				{
					"name": "Login as Customer (Max)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token received\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.accessToken).to.be.a('string');",
									"    pm.environment.set(\"customerToken\", jsonData.accessToken);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"max.mustermann@test.com\",\n  \"password\": \"Test1234!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login as Customer (Anna)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token received\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"customerToken2\", jsonData.accessToken);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"anna.schmidt@test.com\",\n  \"password\": \"Test1234!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login as Owner (Pizza Mario)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token received\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"ownerToken\", jsonData.accessToken);",
									"    if (jsonData.restaurantId) {",
									"        pm.environment.set(\"pizzaMarioId\", jsonData.restaurantId);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"owner@pizzamario.com\",\n  \"password\": \"Test1234!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Login as Owner (Burger Palace)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token received\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"ownerToken2\", jsonData.accessToken);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"owner@burgerpalace.com\",\n  \"password\": \"Test1234!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Vouchers",
			"item": [
				{
					"name": "Validate Voucher - Valid Global",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Voucher is valid\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.valid).to.be.true;",
									"    pm.expect(jsonData.discountAmount).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"WELCOME10\",\n  \"orderAmount\": 26.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vouchers/validate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vouchers", "validate"]
						}
					},
					"response": []
				},
				{
					"name": "Validate Voucher - Restaurant Specific",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Voucher is valid for restaurant\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.valid).to.be.true;",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"MARIO20\",\n  \"restaurantId\": \"{{pizzaMarioId}}\",\n  \"orderAmount\": 26.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vouchers/validate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vouchers", "validate"]
						}
					},
					"response": []
				},
				{
					"name": "Validate Voucher - Expired",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Voucher is invalid (expired)\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.valid).to.be.false;",
									"    pm.expect(jsonData.message).to.include('expired');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"EXPIRED2025\",\n  \"orderAmount\": 26.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vouchers/validate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vouchers", "validate"]
						}
					},
					"response": []
				},
				{
					"name": "Validate Voucher - Non-existent",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\": \"NONEXISTENT\",\n  \"orderAmount\": 26.00\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/vouchers/validate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vouchers", "validate"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Customer - Place Orders",
			"item": [
				{
					"name": "Create Order - Happy Path",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201 Created\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Response has order ID\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.be.a('string');",
									"    pm.environment.set(\"orderId\", jsonData.id);",
									"});",
									"",
									"pm.test(\"Order status is pending\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('pending');",
									"});",
									"",
									"pm.test(\"Final price is calculated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.finalPrice).to.be.above(0);",
									"});",
									"",
									"pm.test(\"Estimated delivery time present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.estimatedDeliveryMinutes).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"restaurantId\": \"{{pizzaMarioId}}\",\n  \"items\": [\n    {\n      \"dishId\": 1,\n      \"quantity\": 2\n    },\n    {\n      \"dishId\": 2,\n      \"quantity\": 1\n    }\n  ],\n  \"customerNotes\": \"Extra KÃ¤se bitte!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Create Order - With Voucher",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Discount applied\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.discountAmount).to.be.above(0);",
									"    pm.expect(jsonData.voucherCode).to.eql('WELCOME10');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"restaurantId\": \"{{pizzaMarioId}}\",\n  \"items\": [\n    {\n      \"dishId\": 1,\n      \"quantity\": 2\n    },\n    {\n      \"dishId\": 2,\n      \"quantity\": 1\n    }\n  ],\n  \"voucherCode\": \"WELCOME10\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Create Order - Invalid Quantity (Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 422\", function () {",
									"    pm.response.to.have.status(422);",
									"});",
									"",
									"pm.test(\"Error message about quantity\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"restaurantId\": \"{{pizzaMarioId}}\",\n  \"items\": [\n    {\n      \"dishId\": 1,\n      \"quantity\": 0\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Create Order - Unauthorized (No Token)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"restaurantId\": \"{{pizzaMarioId}}\",\n  \"items\": [\n    {\n      \"dishId\": 1,\n      \"quantity\": 1\n    }\n  ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Customer - View Orders",
			"item": [
				{
					"name": "Get My Orders (All)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Get My Orders - Filter by Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"All orders have correct status\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(order => {",
									"        pm.expect(order.orderStatus).to.eql('pending');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders?status=pending",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders"],
							"query": [
								{
									"key": "status",
									"value": "pending"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Order Details by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order has items and history\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.items).to.be.an('array');",
									"    pm.expect(jsonData.statusHistory).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}"]
						}
					},
					"response": []
				},
				{
					"name": "Get Order - Not Own Order (Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken2}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Restaurant Owner - Manage Orders",
			"item": [
				{
					"name": "Get Restaurant Orders (All)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/restaurants/{{pizzaMarioId}}/orders",
							"host": ["{{baseUrl}}"],
							"path": ["api", "restaurants", "{{pizzaMarioId}}", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Get Restaurant Orders - Filter Pending",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"All orders are pending\", function () {",
									"    var jsonData = pm.response.json();",
									"    jsonData.forEach(order => {",
									"        pm.expect(order.orderStatus).to.eql('pending');",
									"    });",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/restaurants/{{pizzaMarioId}}/orders?status=pending",
							"host": ["{{baseUrl}}"],
							"path": ["api", "restaurants", "{{pizzaMarioId}}", "orders"],
							"query": [
								{
									"key": "status",
									"value": "pending"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Accept Order",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order status is accepted\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('accepted');",
									"    pm.expect(jsonData.acceptedAt).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/accept",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "accept"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status - Preparing",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order status updated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('preparing');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"preparing\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status - Ready",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order status updated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('ready');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"ready\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status - Delivering",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order status updated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('delivering');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"delivering\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status - Delivered",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Order status updated\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.orderStatus).to.eql('delivered');",
									"    pm.expect(jsonData.deliveredAt).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"delivered\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Update Status - Invalid Transition (Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 409\", function () {",
									"    pm.response.to.have.status(409);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"preparing\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
							"host": ["{{baseUrl}}"],
							"path": ["api", "orders", "{{orderId}}", "status"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Restaurant Owner - Analytics",
			"item": [
				{
					"name": "Get Daily Order Count",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has correct structure\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('date');",
									"    pm.expect(jsonData).to.have.property('orderCount');",
									"    pm.expect(jsonData.orderCount).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/analytics/orders/daily",
							"host": ["{{baseUrl}}"],
							"path": ["api", "analytics", "orders", "daily"]
						}
					},
					"response": []
				},
				{
					"name": "Get Weekly Order Count",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has correct structure\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('weekStart');",
									"    pm.expect(jsonData).to.have.property('weekEnd');",
									"    pm.expect(jsonData).to.have.property('weekNumber');",
									"    pm.expect(jsonData).to.have.property('orderCount');",
									"    pm.expect(jsonData.orderCount).to.be.a('number');",
									"    pm.expect(jsonData.weekNumber).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/analytics/orders/weekly",
							"host": ["{{baseUrl}}"],
							"path": ["api", "analytics", "orders", "weekly"]
						}
					},
					"response": []
				},
				{
					"name": "Get Top Dishes",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has correct structure\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('period');",
									"    pm.expect(jsonData).to.have.property('periodStart');",
									"    pm.expect(jsonData).to.have.property('periodEnd');",
									"    pm.expect(jsonData).to.have.property('dishes');",
									"    pm.expect(jsonData.dishes).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Dishes have correct structure\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.dishes.length > 0) {",
									"        var dish = jsonData.dishes[0];",
									"        pm.expect(dish).to.have.property('dishId');",
									"        pm.expect(dish).to.have.property('dishName');",
									"        pm.expect(dish).to.have.property('orderCount');",
									"        pm.expect(dish).to.have.property('totalQuantity');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ownerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/analytics/dishes/top?limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "analytics", "dishes", "top"],
							"query": [
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Analytics - No Auth (Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/analytics/orders/daily",
							"host": ["{{baseUrl}}"],
							"path": ["api", "analytics", "orders", "daily"]
						}
					},
					"response": []
				},
				{
					"name": "Get Analytics - Customer Token (Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{customerToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/analytics/orders/daily",
							"host": ["{{baseUrl}}"],
							"path": ["api", "analytics", "orders", "daily"]
						}
					},
					"response": []
				}
			]
		}
	]
}
